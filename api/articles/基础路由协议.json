{"title":"基础路由协议","uid":"76925a97c21ef31b084f9a5256583291","slug":"基础路由协议","date":"2022-10-12T15:51:50.000Z","updated":"2022-10-12T15:54:43.636Z","comments":true,"path":"api/articles/基础路由协议.json","keywords":null,"cover":"https://img-blog.csdnimg.cn/20200718094648319.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDc1MzM2,size_16,color_FFFFFF,t_70","content":"<h1 id=\"关于RIP、OSPF和BGP\"><a href=\"#关于RIP、OSPF和BGP\" class=\"headerlink\" title=\"关于RIP、OSPF和BGP\"></a>关于RIP、OSPF和BGP</h1><h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>路由器最重要的两个功能就是路由和转发，常见的路由算法有三种：RIP、OSPF和BGP。</p>\n<h3 id=\"静态路由算法（非自适应路由算法）：\"><a href=\"#静态路由算法（非自适应路由算法）：\" class=\"headerlink\" title=\"静态路由算法（非自适应路由算法）：\"></a>静态路由算法（非自适应路由算法）：</h3><p>管理员手工配置路由信息。</p>\n<p>优点：简便、可靠，在负荷稳定、拓扑变化不大的网络中运行效果很好，广泛用于高度安全性的军事网络和娇小的商业网络。</p>\n<p>缺点：路由更新慢，不适合大型网络。</p>\n<h3 id=\"动态路由算法（自适应路由算法）：\"><a href=\"#动态路由算法（自适应路由算法）：\" class=\"headerlink\" title=\"动态路由算法（自适应路由算法）：\"></a>动态路由算法（自适应路由算法）：</h3><p>路由器间彼此交换信息，按照路由算法优化出路由表项。</p>\n<p>优点：路由更新快，适用大型网络，及时相应链路费用或网络拓扑变化。</p>\n<p>缺点：算法复杂， 增加网络负担。</p>\n<h3 id=\"全局性链路状态路由算法：\"><a href=\"#全局性链路状态路由算法：\" class=\"headerlink\" title=\"全局性链路状态路由算法：\"></a>全局性链路状态路由算法：</h3><p>所有路由器掌握完整的网络拓扑和链路费用信息。如OSPF。</p>\n<h3 id=\"分散性距离向量路由算法：\"><a href=\"#分散性距离向量路由算法：\" class=\"headerlink\" title=\"分散性距离向量路由算法：\"></a>分散性距离向量路由算法：</h3><p>路由器只掌握物理相连的邻居及链路费用。如RIP。</p>\n<p>但是由于因特网规模很大，以及许多单位不想让外界知道自己的路由选择协议，但还想连入因特网的情况存在，出现了另一种算法BGP。</p>\n<p>自制系统AS：在单一的技术管理下的一组路由器，而这些路由器使用一种AS内部的路由选择协议和共同的度量以确定分组在该AS内的路由，同时还是用一种AS之间的裸游协议以确定在AS之间的路由。一个AS内的所有网络都属于一个行政单位来管辖，一个自治系统的所有路由器在本自治系统内部必须连通。</p>\n<h2 id=\"RIP\"><a href=\"#RIP\" class=\"headerlink\" title=\"RIP\"></a>RIP</h2><p>RIP是一种分布式的基于距离向量的路由选择协议，是因特网的协议标准，最大优点是简单。RIP协议要求网络中每一个路由器都维护从它自己到其他每一个目的网络的唯一最佳距离纪录（即一组距离）。</p>\n<p>距离即跳数，即从源端口到目的端口所经过的路由器个数，经过一个路由器跳数+1。特别的，从一路由器到直接连接的网络距离为1。RIP允许一条路由最多只能包含15个路由器，因此距离为16表示网络不可达。</p>\n<p>RIP只适用于小互联网。</p>\n<h3 id=\"特点：\"><a href=\"#特点：\" class=\"headerlink\" title=\"特点：\"></a>特点：</h3><ol>\n<li>仅和相邻路由器交换信息。</li>\n<li>路由器交换的信息是自己的路由器。</li>\n<li>每30秒交换一次路由信息，然后路由器根据新信息更新路由表。若超过180s没收到邻居路由器的通告，则判定邻居没了，并更新自己路由表。</li>\n<li>路由器刚开始工作时，只知道连接的网络的距离，接着每一个路由器也只和数目非常有限的相邻路由器交换并更新路由信息。经过若干次更新后，所有路由器最终都会知道到达本自治系统任何一个网络的最短距离和下一条路由器的地址，即“收敛“。</li>\n<li>当网络出现故障时，要经过比较长的时间（例如数分钟）才能将此信息传送到所有的路由器，“慢收敛“。</li>\n<li>RIP是一种分布式的基于距离向量的内部网关路由选择协议，通过广播UDP报文来交换路由信息。</li>\n</ol>\n<h2 id=\"OSPF\"><a href=\"#OSPF\" class=\"headerlink\" title=\"OSPF\"></a>OSPF</h2><p>开放最短路径有限OSPF协议：开放表明OSPF协议不是受某一家厂商控制，而是公开发表的。最短路径是因为使用了Dijkstra提出的最短路径算法SPF。OSPF最主要的特征就是使用分布式的链路状态协议。</p>\n<h3 id=\"特点\"><a href=\"#特点\" class=\"headerlink\" title=\"特点\"></a>特点</h3><ol>\n<li>使用洪泛法向自制系统内所有路由器发送消息，即路由器通过输入端口向所有相邻的路由器发送信息，而每一个相邻路由器又再次将此信息发往其所有的相邻路由器（广播）。最终整个区域内所有路由器都得到了这个信息的一个副本。</li>\n<li>发送的信息就是与本路由器相邻的所有路由器的链路状态（本路由器和哪些路由器相邻，以及该链路的度量/代价–费用 、距离、时延、带宽等）。</li>\n<li>只有当链路状态发生变化时，路由器才向所有路由器洪泛发送此消息。最后，所有路由器都能简历一个链路状态数据库，即全网拓扑图。</li>\n<li>每隔30min，要刷新一次数据库中的链路状态。</li>\n<li>由于一个路由器的链路状态只涉及到与相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。因此当互联网规模很大时，OSPF协议要比距离向量协议RIP好得多。</li>\n<li>OSPF不存在坏消息传的慢的问题，它的收敛速度很快。</li>\n<li>OSPF的数据包有五种，分别是Hello包，DBD包、LSR、LSU、LSACK</li>\n<li>OSPF状态机一般有七个，分别是down、init、two-way、exstart、exchange、loading、full</li>\n<li>OSPF选路规则有伍哥认为控制的只有cost。</li>\n<li>OSPF建邻居条件很多，有0个。</li>\n<li>OSPF属于IGP协议，追求的是收敛快、选路佳、占用资源少。</li>\n<li>OSPF的防患机制主要依靠它的算法本身还有区域间水平分割等。</li>\n<li>OSPF是一个内部网络协议，要交换的信息量较大，应使报文的长度尽量短，所以不使用传输层协议（如UDP或TCP），而是直接采用IP。</li>\n</ol>\n<h2 id=\"BGP\"><a href=\"#BGP\" class=\"headerlink\" title=\"BGP\"></a>BGP</h2><p>BGP协议描述了如何与其他AS的邻站BGP发言人交换信息，交换的是网络可达性的信息，即要到达某个位置索要经过的一系列AS，发生变化时需要更新有变化的部分。</p>\n<p>BGP支持CIDR，因此BGP的路由表也就应当包括目的网络前缀、下一条路由器，以及到达该目的网络所要经过的各个自制系统序列。</p>\n<p>在BGP刚刚运行时，BGP的邻站是交换整个的BGP路由表。但以后只要需要在发生变化时更新有变化的部分，这样做对节省网络贷款和介绍路由器的处理开销都有好处。</p>\n<p>BGP是应用层协议，借助TCP传送。</p>\n<p>一个BGP发言人与其他自治系统中的BGP发言人要交换路由信息，就要先简历TCP连接，即通过TCP传送，然后在此连接上交换BGP报文以简历BGP会话，利用BGP会话交换路由信息。</p>\n<h3 id=\"BGP报文种类\"><a href=\"#BGP报文种类\" class=\"headerlink\" title=\"BGP报文种类\"></a>BGP报文种类</h3><ol>\n<li>OPEN报文：用来与相邻的另一个BGP发言人建立关系，并认证发送方。</li>\n<li>UPDATE报文：通告新路径或撤销原路径。</li>\n<li>KEEPALIVE报文：在无UPDATE时，周期性证实邻站的连通性；也作为OPEN的确认。</li>\n<li>NOTIFICATION报文：报告先前报文的差错；也被用于关闭连接。</li>\n</ol>\n<p>BGP的状态机有六个，分别是Idle、Connect、Active、Opensent、Openconfirm、Establish</p>\n<p>BGP选路规则有十二个，管理员可以灵活地控制</p>\n<p>BGP的建邻只需要邻居间可达、路由表中有邻居路由即可</p>\n<p>BGP属于EGP，追求的是可靠性、可控性强，还有就是以一个AS为一跳，即AS-BY-AS</p>\n<p>BGP的防环机制主要有IBGP水平分割和EBGP水平分割。</p>\n<p>BGP是一个外部网络协议，在不同的自治系统之间交换路由信息，由于网络环境复杂，需要保证可靠传输，所以采用TCP。</p>\n","feature":true,"text":"关于RIP、OSPF和BGP背景路由器最重要的两个功能就是路由和转发，常见的路由算法有三种：RIP、OSPF和BGP。 静态路由算法（非自适应路由算法）：管理员手工配置路由信息。 优点：简便、可靠，在负荷稳定、拓扑变化不大的网络中运行效果很好，广泛用于高度安全性的军事网络和娇小的...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"基础路由协议","slug":"基础路由协议","count":1,"path":"api/categories/基础路由协议.json"}],"tags":[{"name":"路由协议","slug":"路由协议","count":1,"path":"api/tags/路由协议.json"},{"name":"网络","slug":"网络","count":1,"path":"api/tags/网络.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%85%B3%E4%BA%8ERIP%E3%80%81OSPF%E5%92%8CBGP\"><span class=\"toc-text\">关于RIP、OSPF和BGP</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%EF%BC%88%E9%9D%9E%E8%87%AA%E9%80%82%E5%BA%94%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%EF%BC%89%EF%BC%9A\"><span class=\"toc-text\">静态路由算法（非自适应路由算法）：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%EF%BC%88%E8%87%AA%E9%80%82%E5%BA%94%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%EF%BC%89%EF%BC%9A\"><span class=\"toc-text\">动态路由算法（自适应路由算法）：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E6%80%A7%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%EF%BC%9A\"><span class=\"toc-text\">全局性链路状态路由算法：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%86%E6%95%A3%E6%80%A7%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%EF%BC%9A\"><span class=\"toc-text\">分散性距离向量路由算法：</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#RIP\"><span class=\"toc-text\">RIP</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%89%B9%E7%82%B9%EF%BC%9A\"><span class=\"toc-text\">特点：</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#OSPF\"><span class=\"toc-text\">OSPF</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">特点</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#BGP\"><span class=\"toc-text\">BGP</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#BGP%E6%8A%A5%E6%96%87%E7%A7%8D%E7%B1%BB\"><span class=\"toc-text\">BGP报文种类</span></a></li></ol></li></ol></li></ol>","author":{"name":"kiku","slug":"blog-author","avatar":"https://samedi.gitee.io/favicon.png","link":"/","description":"网络运维,linux运维,web渗透","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"渗透学习总结","uid":"2036d833eadf7ac7f2f1d4187b2dc9e7","slug":"渗透学习总结","date":"2022-10-11T15:04:00.200Z","updated":"2022-10-04T12:50:48.051Z","comments":true,"path":"api/articles/渗透学习总结.json","keywords":null,"cover":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Ffbb3bbcc5e40a92f7b049df2523c5908589325d818880-EkMzKv_fw658&refer=http%3A%2F%2Fhbimg.b0.upaiyun.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1667223164&t=27fe4918cad50d59ba3eab77c87df533","text":"一、信息收集信息收集收集的是什么：whois信息；子域名；端口探测；目录扫描；指纹识别；旁站查询；C段查询；内容敏感信息泄露 使用的工具：谷歌镜像站：使用谷歌语法进行搜索 网络空间搜索引擎：FOFA、钟馗之眼、撒旦。直接搜索网络中的主机或其他网络设备，显示主机的IP、端口、中间件...","link":"","photos":[],"count_time":{"symbolsCount":"46k","symbolsTime":"42 mins."},"categories":[],"tags":[{"name":"渗透测试","slug":"渗透测试","count":1,"path":"api/tags/渗透测试.json"}],"author":{"name":"kiku","slug":"blog-author","avatar":"https://samedi.gitee.io/favicon.png","link":"/","description":"网络运维,linux运维,web渗透","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}